<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tree of Life - Interactive Kabbalah - The Golden Dawn</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: linear-gradient(135deg, #3d2061 0%, #1a0f2e 100%); color: #e0aaff; line-height: 1.8; padding: 20px; min-height: 100vh; }
        .container { max-width: 1100px; margin: 0 auto; background: rgba(61, 32, 97, 0.95); border: 3px solid #9d4edd; padding: 40px; position: relative; overflow: hidden; }

        /* Ambient particles */
        .particle-field { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .particle { position: absolute; width: 4px; height: 4px; background: radial-gradient(circle, #d4af37, transparent); border-radius: 50%; animation: float-particle 15s infinite linear; opacity: 0.6; }
        @keyframes float-particle { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 10% { opacity: 0.6; } 90% { opacity: 0.6; } 100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; } }

        header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #9d4edd; padding-bottom: 20px; position: relative; z-index: 1; }
        h1 { font-family: 'Press Start 2P', cursive; color: #9d4edd; font-size: 20px; margin-bottom: 10px; text-shadow: 0 0 20px #9d4edd; }
        h2 { font-family: 'Press Start 2P', cursive; color: #d4af37; font-size: 12px; margin: 25px 0 15px; }
        .content { font-size: 13px; line-height: 1.8; position: relative; z-index: 1; }
        .content p { margin-bottom: 15px; }
        .content strong { color: #d4af37; }

        /* Interactive Tree Container */
        .tree-container { position: relative; border: 2px solid #d4af37; padding: 20px; margin: 20px 0; background: radial-gradient(ellipse at center, rgba(30, 10, 50, 0.9) 0%, rgba(10, 5, 20, 0.95) 100%); border-radius: 10px; box-shadow: 0 0 40px rgba(157, 78, 221, 0.3), inset 0 0 60px rgba(212, 175, 55, 0.1); }

        /* Canvas for energy flows */
        #treeCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }

        /* SVG Tree */
        .tree-svg-wrapper { position: relative; z-index: 2; }

        /* Sephiroth styling */
        .sephira-circle { cursor: pointer; transition: all 0.3s ease; filter: drop-shadow(0 0 8px currentColor); }
        .sephira-circle:hover { transform: scale(1.15); filter: drop-shadow(0 0 20px currentColor) drop-shadow(0 0 40px currentColor); }
        .sephira-glow { animation: pulse-glow 3s infinite ease-in-out; }
        @keyframes pulse-glow { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.8; } }

        /* Path energy flow */
        .path-line { stroke-dasharray: 5 5; animation: energy-flow 2s infinite linear; }
        @keyframes energy-flow { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -20; } }

        /* Hebrew letters */
        .hebrew-letter { font-size: 18px; fill: #e0aaff; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .sephira-group:hover .hebrew-letter { opacity: 1; }

        /* Control Panel */
        .control-panel { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin: 20px 0; padding: 15px; background: rgba(157, 78, 221, 0.1); border: 1px solid #9d4edd; border-radius: 8px; }
        .control-btn { padding: 10px 20px; background: linear-gradient(135deg, #9d4edd, #6b2fa0); color: #fff; border: 2px solid #d4af37; font-family: 'Press Start 2P', cursive; font-size: 8px; cursor: pointer; transition: all 0.3s; border-radius: 5px; }
        .control-btn:hover { background: linear-gradient(135deg, #d4af37, #b8860b); transform: translateY(-2px); box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4); }
        .control-btn.active { background: linear-gradient(135deg, #d4af37, #ffd700); color: #1a0f2e; box-shadow: 0 0 30px rgba(212, 175, 55, 0.6); }

        /* Meditation Overlay */
        .meditation-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 1000; justify-content: center; align-items: center; flex-direction: column; }
        .meditation-overlay.active { display: flex; }
        .breath-circle { width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle, rgba(212, 175, 55, 0.8), rgba(157, 78, 221, 0.4)); animation: breathe 8s infinite ease-in-out; box-shadow: 0 0 60px rgba(212, 175, 55, 0.5); }
        @keyframes breathe { 0%, 100% { transform: scale(0.6); opacity: 0.5; } 50% { transform: scale(1.2); opacity: 1; } }
        .meditation-text { color: #d4af37; font-family: 'Press Start 2P', cursive; font-size: 14px; margin-top: 30px; text-align: center; }
        .breath-instruction { color: #e0aaff; font-size: 18px; margin-top: 20px; animation: fade-instruction 8s infinite; }
        @keyframes fade-instruction { 0%, 45% { content: 'Inhale...'; } 50%, 95% { content: 'Exhale...'; } }
        .close-meditation { position: absolute; top: 30px; right: 30px; color: #d4af37; font-size: 30px; cursor: pointer; }

        /* Divine Name Display */
        .divine-name-display { text-align: center; padding: 20px; margin: 20px 0; background: rgba(0, 0, 0, 0.3); border-radius: 10px; min-height: 80px; }
        .divine-name { font-size: 36px; color: #d4af37; text-shadow: 0 0 30px rgba(212, 175, 55, 0.8); letter-spacing: 10px; animation: divine-pulse 2s infinite; }
        @keyframes divine-pulse { 0%, 100% { text-shadow: 0 0 30px rgba(212, 175, 55, 0.8); } 50% { text-shadow: 0 0 60px rgba(212, 175, 55, 1), 0 0 100px rgba(255, 215, 0, 0.5); } }
        .divine-name-meaning { color: #e0aaff; font-size: 14px; margin-top: 10px; }

        /* Sephira Info Cards */
        .sephira-box { background: rgba(212, 175, 55, 0.1); border: 2px solid #d4af37; padding: 15px; margin: 15px 0; font-size: 12px; transition: all 0.3s; cursor: pointer; position: relative; overflow: hidden; }
        .sephira-box::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(212, 175, 55, 0.2), transparent 70%); opacity: 0; transition: opacity 0.3s; }
        .sephira-box:hover { transform: translateX(10px); border-color: #ffd700; box-shadow: 0 0 30px rgba(212, 175, 55, 0.3); }
        .sephira-box:hover::before { opacity: 1; }
        .sephira-box strong { display: block; color: #ffdd00; margin-bottom: 8px; }
        .sephira-correspondence { font-size: 10px; color: #9d4edd; margin-top: 8px; opacity: 0; max-height: 0; overflow: hidden; transition: all 0.3s; }
        .sephira-box:hover .sephira-correspondence { opacity: 1; max-height: 100px; }

        /* Four Worlds */
        .four-worlds { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .world-col { background: rgba(157, 78, 221, 0.1); border: 1px solid #9d4edd; padding: 15px; font-size: 11px; transition: all 0.3s; cursor: pointer; position: relative; }
        .world-col:hover { background: rgba(157, 78, 221, 0.3); transform: scale(1.05); z-index: 10; box-shadow: 0 0 30px rgba(157, 78, 221, 0.5); }
        .world-col strong { display: block; color: #d4af37; margin-bottom: 5px; font-family: 'Press Start 2P', cursive; font-size: 9px; }
        .world-col span { display: block; margin: 3px 0; }

        /* Path Working Progress */
        .path-progress { margin: 20px 0; padding: 20px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; }
        .progress-bar { height: 20px; background: rgba(157, 78, 221, 0.3); border-radius: 10px; overflow: hidden; margin-top: 10px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #9d4edd, #d4af37); width: 0%; transition: width 1s ease; border-radius: 10px; }
        .progress-text { text-align: center; font-size: 11px; margin-top: 10px; color: #d4af37; }

        ul { margin-left: 20px; font-size: 13px; line-height: 2; }
        .nav-buttons { margin-top: 30px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        a { display: inline-block; padding: 10px 15px; background: #9d4edd; color: #1a0f2e; text-decoration: none; border: 2px solid #9d4edd; font-family: 'Press Start 2P', cursive; font-size: 9px; cursor: pointer; transition: all 0.3s; }
        a:hover { background: #d4af37; border-color: #d4af37; transform: scale(1.05); }

        /* Modal Enhancements */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .modal.active { display: flex; justify-content: center; align-items: center; }
        .modal-content { background: linear-gradient(135deg, rgba(61, 32, 97, 0.98), rgba(26, 15, 46, 0.98)); padding: 30px; border: 3px solid #d4af37; width: 90%; max-width: 700px; color: #e0aaff; max-height: 80vh; overflow-y: auto; border-radius: 15px; box-shadow: 0 0 60px rgba(212, 175, 55, 0.4); animation: modal-appear 0.3s ease; }
        @keyframes modal-appear { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #9d4edd; }
        .modal-sephira-icon { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 0 30px currentColor; }
        .modal-title { font-family: 'Press Start 2P', cursive; color: #d4af37; font-size: 14px; }
        .modal-hebrew { font-size: 28px; color: #ffd700; }
        .close { color: #d4af37; position: absolute; top: 15px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .close:hover { color: #ffd700; transform: rotate(90deg); }
        .correspondence-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
        .correspondence-item { background: rgba(157, 78, 221, 0.2); padding: 10px; border-radius: 5px; font-size: 11px; }
        .correspondence-label { color: #9d4edd; font-size: 9px; text-transform: uppercase; }

        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 14px; }
            .four-worlds { grid-template-columns: 1fr 1fr; }
            .control-panel { flex-direction: column; }
            .control-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Ambient Particle Field -->
    <div class="particle-field" id="particleField"></div>

    <div class="container">
        <header>
            <h1>âœ§ The Tree of Life âœ§</h1>
            <div style="color: #d4af37; font-size: 12px; font-family: 'Press Start 2P', cursive;">×¢×¥ ×”×—×™×™× â€” The Living Map of Consciousness</div>
        </header>

        <div class="content">
            <p><strong>The Tree of Life</strong> is the central symbol of Kabbalah and Western mystery traditions. It is not a belief system but a <em>map of consciousness</em>â€”showing how divine unity unfolds into multiplicity, and how individual consciousness can ascend back to unity.</p>

            <p>The Tree consists of <strong>10 Sephiroth</strong> (spheres of divine emanation) connected by <strong>22 Paths</strong> (corresponding to Hebrew letters and Tarot). Hover over each sphere to feel its energy. Click to receive its wisdom.</p>

            <!-- Control Panel -->
            <div class="control-panel">
                <button class="control-btn" id="btnMeditate" onclick="startMeditation()">ğŸ§˜ Begin Meditation</button>
                <button class="control-btn" id="btnEnergy" onclick="toggleEnergyFlow()">âš¡ Toggle Energy Flow</button>
                <button class="control-btn" id="btnAscend" onclick="startPathWorking()">ğŸ”º Path Working</button>
                <button class="control-btn" id="btnVibrate" onclick="vibrateNames()">ğŸ”Š Vibrate Divine Names</button>
            </div>

            <!-- Divine Name Display -->
            <div class="divine-name-display" id="divineNameDisplay">
                <div class="divine-name" id="currentDivineName">×™×”×•×”</div>
                <div class="divine-name-meaning" id="divineNameMeaning">Hover over a Sephira to reveal its Divine Name</div>
            </div>

            <h2>âœ¦ The Sacred Structure âœ¦</h2>

            <div class="tree-container" id="treeContainer">
                <canvas id="treeCanvas"></canvas>
                <div class="tree-svg-wrapper" style="text-align: center;">
                    <svg id="treeSVG" width="100%" height="600" viewBox="0 0 400 600" style="max-width: 500px; margin: 0 auto; display: block;">
                        <!-- Defs for gradients and filters -->
                        <defs>
                            <radialGradient id="kether-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#d4af37;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="chokmah-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#c0c0c0;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#808080;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="binah-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#000000;stop-opacity:0.9" />
                            </radialGradient>
                            <radialGradient id="chesed-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#4169e1;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#0000cd;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="geburah-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#ff4444;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#8b0000;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="tiphareth-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#ffd700;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ff8c00;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="netzach-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#50c878;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#228b22;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="hod-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#ffa500;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ff6600;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="yesod-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#9370db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#663399;stop-opacity:0.8" />
                            </radialGradient>
                            <radialGradient id="malkuth-gradient" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#8b4513;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#228b22;stop-opacity:0.9" />
                                <stop offset="100%" style="stop-color:#654321;stop-opacity:0.8" />
                            </radialGradient>
                            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                            </filter>
                        </defs>

                        <!-- 22 Paths (with Tarot correspondences) -->
                        <g id="paths" class="paths-group">
                            <!-- Supernal Triangle -->
                            <line class="path-line" data-path="11" x1="200" y1="50" x2="100" y2="130" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="12" x1="200" y1="50" x2="300" y2="130" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="14" x1="100" y1="130" x2="300" y2="130" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <!-- Abyss crossing -->
                            <line class="path-line" data-path="13" x1="100" y1="130" x2="50" y2="230" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="15" x1="100" y1="130" x2="200" y2="300" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="16" x1="300" y1="130" x2="350" y2="230" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="17" x1="300" y1="130" x2="200" y2="300" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <!-- Middle paths -->
                            <line class="path-line" data-path="18" x1="50" y1="230" x2="200" y2="300" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="19" x1="50" y1="230" x2="350" y2="230" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="20" x1="350" y1="230" x2="200" y2="300" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="21" x1="50" y1="230" x2="100" y2="400" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="22" x1="200" y1="300" x2="100" y2="400" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="23" x1="200" y1="300" x2="300" y2="400" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="24" x1="350" y1="230" x2="300" y2="400" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="25" x1="200" y1="300" x2="200" y2="470" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="26" x1="100" y1="400" x2="300" y2="400" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="27" x1="100" y1="400" x2="200" y2="470" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="28" x1="300" y1="400" x2="200" y2="470" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                            <line class="path-line" data-path="29" x1="200" y1="470" x2="200" y2="560" stroke="#9d4edd" stroke-width="3" opacity="0.7"/>
                        </g>

                        <!-- The Abyss (Daath) -->
                        <g id="daath" class="sephira-group" data-sephira="daath" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="200" cy="180" r="22" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" opacity="0.5"/>
                            <text x="200" y="185" text-anchor="middle" fill="#666" font-size="10" font-style="italic">Da'ath</text>
                        </g>

                        <!-- 10 Sephiroth -->
                        <!-- 1. Kether -->
                        <g id="sephira-1" class="sephira-group" data-sephira="1" onclick="showSephiraModal(1)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="200" cy="50" r="35" fill="url(#kether-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="200" cy="50" r="28" fill="url(#kether-gradient)" filter="url(#glow)" style="color: #ffffff;"/>
                            <text x="200" y="45" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="10">×›×ª×¨</text>
                            <text x="200" y="58" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="9">Kether</text>
                        </g>

                        <!-- 2. Chokmah -->
                        <g id="sephira-2" class="sephira-group" data-sephira="2" onclick="showSephiraModal(2)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="100" cy="130" r="32" fill="url(#chokmah-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="100" cy="130" r="25" fill="url(#chokmah-gradient)" filter="url(#glow)" style="color: #c0c0c0;"/>
                            <text x="100" y="125" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="9">×—×›××”</text>
                            <text x="100" y="138" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="8">Chokmah</text>
                        </g>

                        <!-- 3. Binah -->
                        <g id="sephira-3" class="sephira-group" data-sephira="3" onclick="showSephiraModal(3)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="300" cy="130" r="32" fill="url(#binah-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="300" cy="130" r="25" fill="url(#binah-gradient)" filter="url(#glow)" style="color: #1a1a2e;"/>
                            <text x="300" y="125" text-anchor="middle" fill="#e0aaff" font-weight="bold" font-size="9">×‘×™× ×”</text>
                            <text x="300" y="138" text-anchor="middle" fill="#e0aaff" font-weight="bold" font-size="8">Binah</text>
                        </g>

                        <!-- 4. Chesed -->
                        <g id="sephira-4" class="sephira-group" data-sephira="4" onclick="showSephiraModal(4)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="50" cy="230" r="32" fill="url(#chesed-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="50" cy="230" r="25" fill="url(#chesed-gradient)" filter="url(#glow)" style="color: #4169e1;"/>
                            <text x="50" y="225" text-anchor="middle" fill="#fff" font-weight="bold" font-size="9">×—×¡×“</text>
                            <text x="50" y="238" text-anchor="middle" fill="#fff" font-weight="bold" font-size="8">Chesed</text>
                        </g>

                        <!-- 5. Geburah -->
                        <g id="sephira-5" class="sephira-group" data-sephira="5" onclick="showSephiraModal(5)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="350" cy="230" r="32" fill="url(#geburah-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="350" cy="230" r="25" fill="url(#geburah-gradient)" filter="url(#glow)" style="color: #ff4444;"/>
                            <text x="350" y="225" text-anchor="middle" fill="#fff" font-weight="bold" font-size="9">×’×‘×•×¨×”</text>
                            <text x="350" y="238" text-anchor="middle" fill="#fff" font-weight="bold" font-size="8">Geburah</text>
                        </g>

                        <!-- 6. Tiphareth -->
                        <g id="sephira-6" class="sephira-group" data-sephira="6" onclick="showSephiraModal(6)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="200" cy="300" r="38" fill="url(#tiphareth-gradient)" opacity="0.4"/>
                            <circle class="sephira-circle" cx="200" cy="300" r="30" fill="url(#tiphareth-gradient)" filter="url(#glow)" style="color: #ffd700;"/>
                            <text x="200" y="295" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="10">×ª×¤××¨×ª</text>
                            <text x="200" y="310" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="9">Tiphareth</text>
                        </g>

                        <!-- 7. Netzach -->
                        <g id="sephira-7" class="sephira-group" data-sephira="7" onclick="showSephiraModal(7)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="100" cy="400" r="32" fill="url(#netzach-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="100" cy="400" r="25" fill="url(#netzach-gradient)" filter="url(#glow)" style="color: #50c878;"/>
                            <text x="100" y="395" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="9">× ×¦×—</text>
                            <text x="100" y="408" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="8">Netzach</text>
                        </g>

                        <!-- 8. Hod -->
                        <g id="sephira-8" class="sephira-group" data-sephira="8" onclick="showSephiraModal(8)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="300" cy="400" r="32" fill="url(#hod-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="300" cy="400" r="25" fill="url(#hod-gradient)" filter="url(#glow)" style="color: #ffa500;"/>
                            <text x="300" y="395" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="9">×”×•×“</text>
                            <text x="300" y="408" text-anchor="middle" fill="#1a0f2e" font-weight="bold" font-size="8">Hod</text>
                        </g>

                        <!-- 9. Yesod -->
                        <g id="sephira-9" class="sephira-group" data-sephira="9" onclick="showSephiraModal(9)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="200" cy="470" r="32" fill="url(#yesod-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="200" cy="470" r="25" fill="url(#yesod-gradient)" filter="url(#glow)" style="color: #9370db;"/>
                            <text x="200" y="465" text-anchor="middle" fill="#fff" font-weight="bold" font-size="9">×™×¡×•×“</text>
                            <text x="200" y="478" text-anchor="middle" fill="#fff" font-weight="bold" font-size="8">Yesod</text>
                        </g>

                        <!-- 10. Malkuth -->
                        <g id="sephira-10" class="sephira-group" data-sephira="10" onclick="showSephiraModal(10)" style="cursor: pointer;">
                            <circle class="sephira-glow" cx="200" cy="560" r="32" fill="url(#malkuth-gradient)" opacity="0.3"/>
                            <circle class="sephira-circle" cx="200" cy="560" r="25" fill="url(#malkuth-gradient)" filter="url(#glow)" style="color: #8b4513;"/>
                            <text x="200" y="555" text-anchor="middle" fill="#fff" font-weight="bold" font-size="9">××œ×›×•×ª</text>
                            <text x="200" y="568" text-anchor="middle" fill="#fff" font-weight="bold" font-size="8">Malkuth</text>
                        </g>

                        <!-- Three Pillars Labels -->
                        <text x="50" y="590" text-anchor="middle" fill="#9d4edd" font-size="8" opacity="0.7">Pillar of Severity</text>
                        <text x="200" y="590" text-anchor="middle" fill="#d4af37" font-size="8" opacity="0.7">Middle Pillar</text>
                        <text x="350" y="590" text-anchor="middle" fill="#9d4edd" font-size="8" opacity="0.7">Pillar of Mercy</text>
                    </svg>
                </div>
            </div>

            <!-- Path Working Progress -->
            <div class="path-progress" id="pathProgress" style="display: none;">
                <h3 style="color: #d4af37; font-family: 'Press Start 2P', cursive; font-size: 10px;">ğŸ”º Path Working Journey</h3>
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div class="progress-text" id="progressText">Beginning at Malkuth...</div>
            </div>

            <p style="text-align: center; margin: 20px 0; color: #d4af37; font-size: 12px;">âœ¦ Hover to feel. Click to receive wisdom. Meditate to ascend. âœ¦</p>

            <h2>âœ¦ The Ten Sephiroth âœ¦</h2>

            <div class="sephira-box" data-sephira="1" onclick="showSephiraModal(1)" style="border-color: #ffffff;">
                <strong>ğŸ‘‘ Kether (1) - ×›×ª×¨ - The Crown</strong>
                The source of all existence, the undifferentiated point of unity. Beyond personality and understanding. The first emanation from Ain Soph Aur.
                <div class="sephira-correspondence">Divine Name: ××”×™×” (Eheieh) â€¢ Archangel: Metatron â€¢ Planet: Primum Mobile</div>
            </div>

            <div class="sephira-box" data-sephira="2" onclick="showSephiraModal(2)" style="border-color: #c0c0c0;">
                <strong>âš¡ Chokmah (2) - ×—×›××” - Wisdom</strong>
                Pure creative will, primordial potential, the first impulse toward manifestation. The Supernal Father.
                <div class="sephira-correspondence">Divine Name: ×™×” (Yah) â€¢ Archangel: Raziel â€¢ Planet: Fixed Stars (Zodiac)</div>
            </div>

            <div class="sephira-box" data-sephira="3" onclick="showSephiraModal(3)" style="border-color: #1a1a2e;">
                <strong>ğŸŒ‘ Binah (3) - ×‘×™× ×” - Understanding</strong>
                The womb of creation, receptive principle, the dark void from which form emerges. The Supernal Mother.
                <div class="sephira-correspondence">Divine Name: ×™×”×•×” ××œ×”×™× (YHVH Elohim) â€¢ Archangel: Tzaphkiel â€¢ Planet: Saturn â™„</div>
            </div>

            <div class="sephira-box" data-sephira="4" onclick="showSephiraModal(4)" style="border-color: #4169e1;">
                <strong>ğŸ”µ Chesed (4) - ×—×¡×“ - Mercy</strong>
                Divine compassion and expansion, abundance, the sovereign lord of form. The benevolent king.
                <div class="sephira-correspondence">Divine Name: ××œ (El) â€¢ Archangel: Tzadkiel â€¢ Planet: Jupiter â™ƒ</div>
            </div>

            <div class="sephira-box" data-sephira="5" onclick="showSephiraModal(5)" style="border-color: #ff4444;">
                <strong>ğŸ”´ Geburah (5) - ×’×‘×•×¨×” - Severity</strong>
                Divine justice and force, the warrior principle, transformation through challenge and discipline.
                <div class="sephira-correspondence">Divine Name: ××œ×”×™× ×’×‘×•×¨ (Elohim Gibor) â€¢ Archangel: Kamael â€¢ Planet: Mars â™‚</div>
            </div>

            <div class="sephira-box" data-sephira="6" onclick="showSephiraModal(6)" style="border-color: #ffd700;">
                <strong>â˜€ï¸ Tiphareth (6) - ×ª×¤××¨×ª - Beauty</strong>
                The heart of the Tree, individual self unified with divine consciousness, seat of the Higher Self and Christ consciousness.
                <div class="sephira-correspondence">Divine Name: ×™×”×•×” ××œ×•×” ×•×“×¢×ª (YHVH Eloah Va-Daath) â€¢ Archangel: Raphael â€¢ Planet: Sun â˜‰</div>
            </div>

            <div class="sephira-box" data-sephira="7" onclick="showSephiraModal(7)" style="border-color: #50c878;">
                <strong>ğŸ’š Netzach (7) - × ×¦×— - Victory</strong>
                Art, beauty, emotion, desire, the realm of imagination, nature spirits, and creative inspiration.
                <div class="sephira-correspondence">Divine Name: ×™×”×•×” ×¦×‘××•×ª (YHVH Tzabaoth) â€¢ Archangel: Haniel â€¢ Planet: Venus â™€</div>
            </div>

            <div class="sephira-box" data-sephira="8" onclick="showSephiraModal(8)" style="border-color: #ffa500;">
                <strong>ğŸ§¡ Hod (8) - ×”×•×“ - Splendor</strong>
                Intellect and reason, logic and communication, the power of the mind to know and transmit wisdom.
                <div class="sephira-correspondence">Divine Name: ××œ×”×™× ×¦×‘××•×ª (Elohim Tzabaoth) â€¢ Archangel: Michael â€¢ Planet: Mercury â˜¿</div>
            </div>

            <div class="sephira-box" data-sephira="9" onclick="showSephiraModal(9)" style="border-color: #9370db;">
                <strong>ğŸŒ™ Yesod (9) - ×™×¡×•×“ - Foundation</strong>
                The subconscious mind, dreams and visions, the link between physical and spiritual. The astral plane.
                <div class="sephira-correspondence">Divine Name: ×©×“×™ ××œ ×—×™ (Shaddai El Chai) â€¢ Archangel: Gabriel â€¢ Planet: Moon â˜½</div>
            </div>

            <div class="sephira-box" data-sephira="10" onclick="showSephiraModal(10)" style="border-color: #8b4513;">
                <strong>ğŸŒ Malkuth (10) - ××œ×›×•×ª - The Kingdom</strong>
                Physical manifestation, the material world where the divine becomes real in matter. Your body and the Earth.
                <div class="sephira-correspondence">Divine Name: ××“× ×™ ×”××¨×¥ (Adonai Ha-Aretz) â€¢ Archangel: Sandalphon â€¢ Element: Earth ğŸœƒ</div>
            </div>

            <h2>âœ¦ The Four Worlds âœ¦</h2>

            <div class="four-worlds">
                <div class="world-col" onclick="showWorldInfo('atziluth')">
                    <strong>××¦×™×œ×•×ª<br>Atziluth</strong>
                    <span>ğŸ”¥ World of Emanation</span>
                    <span>Pure divine being</span>
                    <span>Kether, Chokmah, Binah</span>
                    <span style="color:#d4af37;">Archetypal World</span>
                </div>
                <div class="world-col" onclick="showWorldInfo('briah')">
                    <strong>×‘×¨×™××”<br>Briah</strong>
                    <span>ğŸ’¨ World of Creation</span>
                    <span>Archangelic realm</span>
                    <span>Chesed, Geburah, Tiphareth</span>
                    <span style="color:#d4af37;">Creative World</span>
                </div>
                <div class="world-col" onclick="showWorldInfo('yetzirah')">
                    <strong>×™×¦×™×¨×”<br>Yetzirah</strong>
                    <span>ğŸ’§ World of Formation</span>
                    <span>Angelic realm</span>
                    <span>Netzach, Hod, Yesod</span>
                    <span style="color:#d4af37;">Formative World</span>
                </div>
                <div class="world-col" onclick="showWorldInfo('assiah')">
                    <strong>×¢×©×™×™×”<br>Assiah</strong>
                    <span>ğŸœƒ World of Action</span>
                    <span>Physical world</span>
                    <span>Malkuth</span>
                    <span style="color:#d4af37;">Material World</span>
                </div>
            </div>

            <h2>âœ¦ The Path of the Seeker âœ¦</h2>

            <p>Your journey through the mysteries involves ascending the Tree of Life. You begin in <strong>Malkuth</strong> (physical consciousness) and ascend through the Sephiroth, crossing the <strong>Abyss</strong> at the appropriate time, until you achieve direct experience of <strong>Kether</strong>â€”unity consciousness.</p>

            <ul>
                <li>ğŸœƒ <strong>Malkuth:</strong> Waking, material awareness â€” ground yourself here</li>
                <li>â˜½ <strong>Yesod:</strong> Dream consciousness, imagination â€” work with the astral</li>
                <li>â™€â™‚ <strong>Hod/Netzach:</strong> Intellect and emotion balanced â€” master the personality</li>
                <li>â˜‰ <strong>Tiphareth:</strong> Individual enlightenment â€” unite with the Higher Self</li>
                <li>âš”ï¸ <strong>Cross the Abyss:</strong> Dissolve the ego â€” face Choronzon</li>
                <li>â™„ <strong>Binah/Chokmah:</strong> Direct perception of creative forces</li>
                <li>ğŸ‘‘ <strong>Kether:</strong> Unity with the absolute â€” return to the Source</li>
            </ul>

            <p style="margin-top: 30px; text-align: center; color: #d4af37; font-family: 'Press Start 2P', cursive; font-size: 12px;">
                âœ§ The descent of light. The ascent of consciousness. âœ§
            </p>
        </div>

        <div class="nav-buttons">
            <a href="../index.html">â† Golden Dawn</a>
            <a href="rituals/">Rituals â†’</a>
        </div>
    </div>

    <!-- Meditation Overlay -->
    <div class="meditation-overlay" id="meditationOverlay">
        <span class="close-meditation" onclick="closeMeditation()">âœ•</span>
        <div class="breath-circle" id="breathCircle"></div>
        <div class="meditation-text" id="meditationSephira">Ascending the Tree...</div>
        <div class="breath-instruction" id="breathInstruction">Breathe in...</div>
        <div style="margin-top: 40px; color: #9d4edd; font-size: 12px;" id="meditationGuidance">
            Focus on the light descending from Kether through each sphere...
        </div>
    </div>

    <!-- Sephira Modal -->
    <div class="modal" id="sephiraModal">
        <div class="modal-content">
            <span class="close" onclick="closeSephiraModal()">âœ•</span>
            <div class="modal-header">
                <div class="modal-sephira-icon" id="modalIcon">1</div>
                <div>
                    <div class="modal-title" id="modalTitle">Kether - The Crown</div>
                    <div class="modal-hebrew" id="modalHebrew">×›×ª×¨</div>
                </div>
            </div>
            <div id="modalDescription"></div>
            <div class="correspondence-grid" id="modalCorrespondences"></div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="control-btn" onclick="vibrateSephira(currentSephira)">ğŸ”Š Vibrate Divine Name</button>
                <button class="control-btn" onclick="meditateSephira(currentSephira)">ğŸ§˜ Meditate on this Sphere</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // SEPHIROTH DATA - Complete Spiritual Correspondences
        // ============================================
        const sephirothData = {
            1: {
                name: 'Kether', hebrew: '×›×ª×¨', meaning: 'The Crown',
                divineName: '××”×™×”', divineNameLatin: 'Eheieh', divineNameMeaning: 'I Am',
                archangel: 'Metatron', angelicOrder: 'Chayoth ha-Qadesh (Holy Living Creatures)',
                planet: 'Primum Mobile', color: '#ffffff', element: 'Spirit',
                experience: 'Union with God', virtue: 'Attainment, Completion of the Great Work',
                vice: 'None (beyond duality)', symbol: 'ğŸ‘‘ Crown, Point, Swastika',
                body: 'Crown of Head (Sahasrara)', tarot: 'The four Aces',
                description: 'Kether is the first emanation from Ain Soph Aur (Limitless Light). It is the point of pure being before differentiation, the source from which all else flows. In meditation, Kether represents the state of absolute unityâ€”no subject, no object, only IS.',
                guidance: 'To approach Kether, one must let go of all concepts, all identity, all desire. It is not reached but revealed when all else falls away.'
            },
            2: {
                name: 'Chokmah', hebrew: '×—×›××”', meaning: 'Wisdom',
                divineName: '×™×”', divineNameLatin: 'Yah', divineNameMeaning: 'The Lord',
                archangel: 'Raziel', angelicOrder: 'Auphanim (Wheels)',
                planet: 'Fixed Stars / Zodiac', color: '#c0c0c0', element: 'Fire',
                experience: 'Vision of God Face to Face', virtue: 'Devotion',
                vice: 'None', symbol: 'âš¡ The Phallus, The Line, The Tower',
                body: 'Left Side of Face', tarot: 'The four Twos, The Magician',
                description: 'Chokmah is the Supernal Father, pure creative force rushing forth from unity. It is Wisdomâ€”not knowledge, but the direct flash of insight before thought. The Big Bang of consciousness.',
                guidance: 'Chokmah is accessed through moments of pure inspiration, the sudden knowing that precedes understanding. Cultivate receptivity to flashes of insight.'
            },
            3: {
                name: 'Binah', hebrew: '×‘×™× ×”', meaning: 'Understanding',
                divineName: '×™×”×•×” ××œ×”×™×', divineNameLatin: 'YHVH Elohim', divineNameMeaning: 'The Lord God',
                archangel: 'Tzaphkiel', angelicOrder: 'Aralim (Thrones)',
                planet: 'Saturn â™„', color: '#000000', element: 'Water',
                experience: 'Vision of Sorrow', virtue: 'Silence',
                vice: 'Avarice', symbol: 'ğŸŒ‘ The Cup, The Vesica Piscis, The Triangle',
                body: 'Right Side of Face', tarot: 'The four Threes, The Empress',
                description: 'Binah is the Supernal Mother, the Great Sea into which the lightning flash of Chokmah descends. She is Understandingâ€”the ability to receive and give form to pure force. She is also the Great Restrictor, as all form is limitation.',
                guidance: 'Binah teaches through acceptance of limitation and the wisdom of silence. To understand is to stand underâ€”to be receptive.'
            },
            4: {
                name: 'Chesed', hebrew: '×—×¡×“', meaning: 'Mercy',
                divineName: '××œ', divineNameLatin: 'El', divineNameMeaning: 'God',
                archangel: 'Tzadkiel', angelicOrder: 'Chasmalim (Brilliant Ones)',
                planet: 'Jupiter â™ƒ', color: '#0000ff', element: 'Water',
                experience: 'Vision of Love', virtue: 'Obedience',
                vice: 'Bigotry, Tyranny, Hypocrisy', symbol: 'ğŸ”µ The Orb, The Sceptre, The Crook',
                body: 'Left Arm', tarot: 'The four Fours, The Emperor',
                description: 'Chesed is the first Sephira below the Abyss, the benevolent King who organizes and rules. It represents mercy, abundance, and the organizing principle that gives form to the creative forces above.',
                guidance: 'Chesed asks: How can you be more generous? Where can you expand your love? The path of mercy requires courage to give freely.'
            },
            5: {
                name: 'Geburah', hebrew: '×’×‘×•×¨×”', meaning: 'Severity',
                divineName: '××œ×”×™× ×’×‘×•×¨', divineNameLatin: 'Elohim Gibor', divineNameMeaning: 'God of Battles',
                archangel: 'Kamael', angelicOrder: 'Seraphim (Fiery Serpents)',
                planet: 'Mars â™‚', color: '#ff0000', element: 'Fire',
                experience: 'Vision of Power', virtue: 'Energy, Courage',
                vice: 'Cruelty, Destruction', symbol: 'âš”ï¸ The Sword, The Spear, The Scourge',
                body: 'Right Arm', tarot: 'The four Fives, Strength',
                description: 'Geburah is the Warrior, the purifying fire that cuts away what is unnecessary. It is divine justice and discipline, the strength to say no and to destroy what impedes spiritual growth.',
                guidance: 'Geburah asks: What must you let go of? What illusions need burning? True strength is the courage to transform.'
            },
            6: {
                name: 'Tiphareth', hebrew: '×ª×¤××¨×ª', meaning: 'Beauty',
                divineName: '×™×”×•×” ××œ×•×” ×•×“×¢×ª', divineNameLatin: 'YHVH Eloah Va-Daath', divineNameMeaning: 'God Made Manifest in Mind',
                archangel: 'Raphael', angelicOrder: 'Malachim (Kings)',
                planet: 'Sun â˜‰', color: '#ffd700', element: 'Air/Spirit',
                experience: 'Vision of Harmony', virtue: 'Devotion to the Great Work',
                vice: 'Pride, False Pride', symbol: 'â˜‰ The Lamen, The Rose Cross, The Cube',
                body: 'Heart', tarot: 'The four Sixes, The Lovers',
                description: 'Tiphareth is the heart of the Tree, where the Higher Self resides. It is Beautyâ€”the harmony of opposing forces, the Christ consciousness, the point of balance between above and below.',
                guidance: 'Tiphareth is the goal of the first stage of the Great Work. Here the personality integrates with the Higher Self. Center in your heart and seek the inner sun.'
            },
            7: {
                name: 'Netzach', hebrew: '× ×¦×—', meaning: 'Victory',
                divineName: '×™×”×•×” ×¦×‘××•×ª', divineNameLatin: 'YHVH Tzabaoth', divineNameMeaning: 'Lord of Hosts',
                archangel: 'Haniel', angelicOrder: 'Elohim (Gods)',
                planet: 'Venus â™€', color: '#00ff00', element: 'Fire',
                experience: 'Vision of Beauty Triumphant', virtue: 'Unselfishness',
                vice: 'Unchastity, Lust', symbol: 'ğŸ’š The Rose, The Girdle, The Lamp',
                body: 'Left Hip/Leg', tarot: 'The four Sevens, The Chariot',
                description: 'Netzach is the realm of emotions, desires, and the creative arts. It is the instinctual, passionate side of consciousnessâ€”nature spirits, love, and the pursuit of beauty.',
                guidance: 'Netzach teaches through feeling. Honor your emotions as guides. Create beauty. Love passionately but wisely.'
            },
            8: {
                name: 'Hod', hebrew: '×”×•×“', meaning: 'Splendor',
                divineName: '××œ×”×™× ×¦×‘××•×ª', divineNameLatin: 'Elohim Tzabaoth', divineNameMeaning: 'God of Hosts',
                archangel: 'Michael', angelicOrder: 'Beni Elohim (Sons of Gods)',
                planet: 'Mercury â˜¿', color: '#ffa500', element: 'Water',
                experience: 'Vision of Splendor', virtue: 'Truthfulness',
                vice: 'Falsehood, Dishonesty', symbol: 'ğŸ“¿ The Names, The Apron, The Book',
                body: 'Right Hip/Leg', tarot: 'The four Eights, The Hermit',
                description: 'Hod is the realm of intellect, logic, and magic as a science. It is the mind\'s power to analyze, categorize, and communicate. Ceremonial magic works primarily through Hod.',
                guidance: 'Hod teaches through study and analysis. Master the symbols. Learn the correspondences. But remember: the map is not the territory.'
            },
            9: {
                name: 'Yesod', hebrew: '×™×¡×•×“', meaning: 'Foundation',
                divineName: '×©×“×™ ××œ ×—×™', divineNameLatin: 'Shaddai El Chai', divineNameMeaning: 'Almighty Living God',
                archangel: 'Gabriel', angelicOrder: 'Kerubim (Strong Ones)',
                planet: 'Moon â˜½', color: '#9370db', element: 'Air',
                experience: 'Vision of the Machinery of the Universe', virtue: 'Independence',
                vice: 'Idleness', symbol: 'â˜½ The Sandals, The Perfumes, The Mirror',
                body: 'Genitals', tarot: 'The four Nines, The Moon',
                description: 'Yesod is the Foundationâ€”the astral plane where all forms exist before physical manifestation. It is the subconscious mind, dreams, and the lunar tides of the psyche.',
                guidance: 'Yesod is accessed through dreams, visualization, and astral work. What you imagine here takes form. Guard your thoughts and visions.'
            },
            10: {
                name: 'Malkuth', hebrew: '××œ×›×•×ª', meaning: 'The Kingdom',
                divineName: '××“× ×™ ×”××¨×¥', divineNameLatin: 'Adonai Ha-Aretz', divineNameMeaning: 'Lord of the Earth',
                archangel: 'Sandalphon', angelicOrder: 'Ashim (Souls of Fire)',
                planet: 'Earth ğŸœƒ', color: '#8b4513', element: 'Earth',
                experience: 'Vision of the Holy Guardian Angel', virtue: 'Discrimination',
                vice: 'Avarice, Inertia', symbol: 'ğŸŒ The Equal-Armed Cross, The Magic Circle, The Triangle',
                body: 'Feet, Base of Spine', tarot: 'The four Tens, The World',
                description: 'Malkuth is the physical world, your body, the Earth itself. It is the Kingdom where spirit finally manifests as matter. Far from being "low," Malkuth is sacredâ€”the bride of Kether.',
                guidance: 'Malkuth is where the Great Work begins and ends. Ground yourself. Honor your body. The Earth is holy. "As above, so below."'
            }
        };

        let currentSephira = null;
        let energyFlowActive = true;
        let meditationActive = false;
        let pathWorkingActive = false;
        let currentPathStep = 0;

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            initParticles();
            initCanvas();
            initSephirothHover();
            startEnergyAnimation();
        });

        // ============================================
        // PARTICLE FIELD
        // ============================================
        function initParticles() {
            const field = document.getElementById('particleField');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                field.appendChild(particle);
            }
        }

        // ============================================
        // CANVAS ENERGY FLOW
        // ============================================
        let canvas, ctx;
        let energyParticles = [];

        function initCanvas() {
            canvas = document.getElementById('treeCanvas');
            const container = document.getElementById('treeContainer');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            ctx = canvas.getContext('2d');
        }

        function startEnergyAnimation() {
            if (!energyFlowActive) return;

            // Create energy particles along paths
            if (Math.random() < 0.1) {
                createEnergyParticle();
            }

            // Update and draw particles
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            energyParticles = energyParticles.filter(p => p.life > 0);
            energyParticles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.01;

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${p.color}, ${p.life})`;
                ctx.fill();
            });

            requestAnimationFrame(startEnergyAnimation);
        }

        function createEnergyParticle() {
            const colors = ['212, 175, 55', '157, 78, 221', '255, 215, 0', '147, 112, 219'];
            const svgRect = document.getElementById('treeSVG').getBoundingClientRect();
            const containerRect = document.getElementById('treeContainer').getBoundingClientRect();

            energyParticles.push({
                x: Math.random() * canvas.width,
                y: canvas.height,
                vx: (Math.random() - 0.5) * 2,
                vy: -Math.random() * 3 - 1,
                size: Math.random() * 3 + 1,
                color: colors[Math.floor(Math.random() * colors.length)],
                life: 1
            });
        }

        function toggleEnergyFlow() {
            energyFlowActive = !energyFlowActive;
            const btn = document.getElementById('btnEnergy');
            btn.classList.toggle('active', energyFlowActive);
            if (energyFlowActive) startEnergyAnimation();
        }

        // ============================================
        // SEPHIROTH HOVER & DIVINE NAMES
        // ============================================
        function initSephirothHover() {
            document.querySelectorAll('.sephira-group').forEach(group => {
                const sephiraId = group.dataset.sephira;
                if (sephiraId && sephirothData[sephiraId]) {
                    group.addEventListener('mouseenter', () => {
                        const data = sephirothData[sephiraId];
                        document.getElementById('currentDivineName').textContent = data.divineName;
                        document.getElementById('divineNameMeaning').textContent =
                            `${data.divineNameLatin} â€” "${data.divineNameMeaning}" â€” ${data.name}`;
                    });
                }
            });
        }

        // ============================================
        // SEPHIRA MODAL
        // ============================================
        function showSephiraModal(id) {
            currentSephira = id;
            const data = sephirothData[id];
            if (!data) return;

            document.getElementById('modalIcon').textContent = id;
            document.getElementById('modalIcon').style.background = data.color;
            document.getElementById('modalIcon').style.color = data.color === '#000000' ? '#fff' : '#000';
            document.getElementById('modalIcon').style.boxShadow = `0 0 30px ${data.color}`;
            document.getElementById('modalTitle').textContent = `${data.name} â€” ${data.meaning}`;
            document.getElementById('modalHebrew').textContent = data.hebrew;
            document.getElementById('modalDescription').innerHTML = `
                <p style="margin-bottom: 15px;">${data.description}</p>
                <p style="color: #d4af37; font-style: italic;">"${data.guidance}"</p>
            `;

            document.getElementById('modalCorrespondences').innerHTML = `
                <div class="correspondence-item"><div class="correspondence-label">Divine Name</div>${data.divineName} (${data.divineNameLatin})</div>
                <div class="correspondence-item"><div class="correspondence-label">Archangel</div>${data.archangel}</div>
                <div class="correspondence-item"><div class="correspondence-label">Angelic Order</div>${data.angelicOrder}</div>
                <div class="correspondence-item"><div class="correspondence-label">Planet</div>${data.planet}</div>
                <div class="correspondence-item"><div class="correspondence-label">Element</div>${data.element}</div>
                <div class="correspondence-item"><div class="correspondence-label">Experience</div>${data.experience}</div>
                <div class="correspondence-item"><div class="correspondence-label">Virtue</div>${data.virtue}</div>
                <div class="correspondence-item"><div class="correspondence-label">Vice</div>${data.vice}</div>
                <div class="correspondence-item"><div class="correspondence-label">Symbols</div>${data.symbol}</div>
                <div class="correspondence-item"><div class="correspondence-label">Body</div>${data.body}</div>
                <div class="correspondence-item"><div class="correspondence-label">Tarot</div>${data.tarot}</div>
                <div class="correspondence-item"><div class="correspondence-label">Color</div><span style="display:inline-block;width:20px;height:20px;background:${data.color};border:1px solid #fff;vertical-align:middle;"></span></div>
            `;

            document.getElementById('sephiraModal').classList.add('active');
        }

        function closeSephiraModal() {
            document.getElementById('sephiraModal').classList.remove('active');
        }

        // ============================================
        // MEDITATION MODE
        // ============================================
        function startMeditation() {
            meditationActive = true;
            document.getElementById('meditationOverlay').classList.add('active');
            document.getElementById('btnMeditate').classList.add('active');
            runBreathCycle();
        }

        function closeMeditation() {
            meditationActive = false;
            document.getElementById('meditationOverlay').classList.remove('active');
            document.getElementById('btnMeditate').classList.remove('active');
        }

        function runBreathCycle() {
            if (!meditationActive) return;

            const instruction = document.getElementById('breathInstruction');
            const phases = ['Breathe in...', 'Hold...', 'Breathe out...', 'Hold...'];
            const sephirothOrder = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
            let phase = 0;
            let sephIndex = 0;

            setInterval(() => {
                if (!meditationActive) return;
                instruction.textContent = phases[phase];
                phase = (phase + 1) % 4;

                if (phase === 0) {
                    const seph = sephirothData[sephirothOrder[sephIndex]];
                    document.getElementById('meditationSephira').textContent =
                        `Ascending through ${seph.name}...`;
                    document.getElementById('meditationGuidance').textContent = seph.guidance;
                    sephIndex = (sephIndex + 1) % 10;
                }
            }, 2000);
        }

        function meditateSephira(id) {
            closeSephiraModal();
            startMeditation();
            const data = sephirothData[id];
            document.getElementById('meditationSephira').textContent = `Meditating on ${data.name}...`;
            document.getElementById('meditationGuidance').textContent = data.guidance;
        }

        // ============================================
        // DIVINE NAME VIBRATION
        // ============================================
        function vibrateNames() {
            const btn = document.getElementById('btnVibrate');
            btn.classList.add('active');

            let index = 1;
            const vibrate = () => {
                if (index > 10) {
                    btn.classList.remove('active');
                    return;
                }
                const data = sephirothData[index];
                document.getElementById('currentDivineName').textContent = data.divineName;
                document.getElementById('currentDivineName').style.animation = 'none';
                setTimeout(() => {
                    document.getElementById('currentDivineName').style.animation = 'divine-pulse 0.5s ease 3';
                }, 10);
                document.getElementById('divineNameMeaning').textContent =
                    `${data.divineNameLatin} â€” "${data.divineNameMeaning}"`;

                // Flash the corresponding sephira
                const sephiraEl = document.getElementById(`sephira-${index}`);
                if (sephiraEl) {
                    sephiraEl.style.transform = 'scale(1.3)';
                    setTimeout(() => sephiraEl.style.transform = '', 500);
                }

                index++;
                setTimeout(vibrate, 2000);
            };
            vibrate();
        }

        function vibrateSephira(id) {
            const data = sephirothData[id];
            document.getElementById('currentDivineName').textContent = data.divineName;
            document.getElementById('currentDivineName').style.animation = 'none';
            setTimeout(() => {
                document.getElementById('currentDivineName').style.animation = 'divine-pulse 0.5s ease 5';
            }, 10);
            document.getElementById('divineNameMeaning').textContent =
                `Vibrating: ${data.divineNameLatin} â€” "${data.divineNameMeaning}"`;
        }

        // ============================================
        // PATH WORKING
        // ============================================
        const pathOrder = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1];

        function startPathWorking() {
            pathWorkingActive = true;
            currentPathStep = 0;
            document.getElementById('pathProgress').style.display = 'block';
            document.getElementById('btnAscend').classList.add('active');
            advancePathWorking();
        }

        function advancePathWorking() {
            if (currentPathStep >= pathOrder.length) {
                document.getElementById('progressText').textContent =
                    'âœ§ You have reached Kether â€” Unity with the Divine âœ§';
                document.getElementById('btnAscend').classList.remove('active');
                pathWorkingActive = false;
                return;
            }

            const sephId = pathOrder[currentPathStep];
            const data = sephirothData[sephId];
            const progress = ((currentPathStep + 1) / pathOrder.length) * 100;

            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent =
                `${data.name}: ${data.experience}`;

            // Highlight current sephira
            document.querySelectorAll('.sephira-group').forEach(g => g.style.opacity = '0.5');
            const current = document.getElementById(`sephira-${sephId}`);
            if (current) {
                current.style.opacity = '1';
                current.style.transform = 'scale(1.2)';
                setTimeout(() => current.style.transform = '', 500);
            }

            currentPathStep++;
            setTimeout(advancePathWorking, 3000);
        }

        // ============================================
        // WORLD INFO
        // ============================================
        function showWorldInfo(world) {
            const worldData = {
                atziluth: { name: 'Atziluth', desc: 'The World of Emanation. Here the Divine Names resonate in their purest form. This is the realm of archetypes, of pure being before manifestation.' },
                briah: { name: 'Briah', desc: 'The World of Creation. The Archangels dwell here, mediating divine will into creative patterns. This is where cosmic blueprints are formed.' },
                yetzirah: { name: 'Yetzirah', desc: 'The World of Formation. Angels and astral forces shape the forms that will manifest below. Dreams and visions occur in this realm.' },
                assiah: { name: 'Assiah', desc: 'The World of Action. Physical reality. Here spirit becomes matter, and the divine plan achieves final manifestation in form.' }
            };
            alert(`${worldData[world].name}\n\n${worldData[world].desc}`);
        }

        // ============================================
        // GAMIFICATION INTEGRATION
        // ============================================
        if (typeof TheGoldenDawnGamification !== 'undefined') {
            const gamification = new TheGoldenDawnGamification();
            gamification.trackPageVisit('tree-of-life');
            if (!gamification.progress.treeOfLifeProgress.includes('overview')) {
                gamification.progress.treeOfLifeProgress.push('overview');
                gamification.saveProgress();
            }
        }

        // Close modals on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeSephiraModal();
                closeMeditation();
            }
        });

        // Close modal on outside click
        document.getElementById('sephiraModal').addEventListener('click', (e) => {
            if (e.target.id === 'sephiraModal') closeSephiraModal();
        });
    </script>
</body>
</html>